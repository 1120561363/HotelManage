<div id="wrapper">
    <!-- Navigation -->
    <nav class="top1 navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">天浦大酒店管理</a>
        </div>
        <!-- /.navbar-header -->
        <ul class="nav navbar-nav navbar-right" ng-click="setFlag=!setFlag">
            <li class="dropdown">
                <a class="dropdown-toggle avatar" data-toggle="dropdown"><img src="images/1.png"></a>
                <ul class="dropdown-menu" ng-show="setFlag">
                    <li class="m_2"><i class="fa fa-bell-o"></i> 欢迎您：<span style="color: mediumvioletred;margin-left: 10px">{{name}}</span></li>
                    <li class="m_2" ng-click="loginOut()"><i class="fa fa-lock"></i> 退出登录</li>
                </ul>
            </li>
        </ul>
        <form class="navbar-form navbar-right">
            <input type="text" class="form-control" value="请输入关键字." onfocus="this.value = '';"
                   onblur="if (this.value == '') {this.value = '请输入关键字.';}">
        </form>
        <div class="navbar-default sidebar" role="navigation">
            <div class="sidebar-nav navbar-collapse" style=" height: 840px">
                <ul class="nav" id="side-menu">
                    <li>
                        <a  ng-click="goToHtml('dashbord')"><i class="fa fa-dashboard fa-fw nav_icon"></i>主页</a>                    </li>
                    <li>
                        <a ng-click="changeFlag1()"><i class="fa fa-indent nav_icon"></i>房间管理<span class="fa arrow"  ng-show="!flag1"></span></a>
                        <ul class="nav nav-second-level" ng-show="flag1">
                            <li>
                                <a ng-click="goToHtml('rooms')">所有房间</a>
                            </li>
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ng-click="changeFlag2()"><i class="fa fa-envelope nav_icon"></i>所有订单<span class="fa arrow" ng-show="!flag2"></span></a>
                        <ul class="nav nav-second-level" ng-show="flag2">
                            <li>
                                <a ng-click="goToHtml('orders')">订单查看</a>
                            </li>
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                    <li ng-show="auth == 1">
                        <a ng-click="goToHtml('report')"><i class="fa fa-flask nav_icon"></i>营业查询</a>
                    </li>
                    <li ng-show="auth == 1">
                        <a ng-click="changeFlag3()"><i class="fa fa-check-square-o nav_icon"></i>员工管理<span class="fa arrow" ng-show="!flag3"></span></a>
                        <ul class="nav nav-second-level" ng-show="flag3">
                            <li>
                                <a ng-click="goToHtml('users')">查看员工</a>
                            </li>
                            <li>
                                <a ng-click="goToHtml('add_user')">新增员工</a>
                            </li>
                        </ul>
                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>

                    <li>
                        <a><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                    <li>
                        <a ><i class=""></i><span class=" "></span></a>

                        <!-- /.nav-second-level -->
                    </li>
                </ul>
            </div>
            <!-- /.sidebar-collapse -->
        </div>
        <!-- /.navbar-static-side -->
    </nav>
    <div id="page-wrapper" >
        <div style="margin-left: 10%">
            <p> &nbsp;</p>
            <p> &nbsp;</p>
            <h3 style="margin-left: 30px">选择年份<select name="year" onchange="change(value)">
                <option value="2016">2016</option>
                <option value="2015">2015</option>
                <option value="2014">2014</option>
                <option value="2013">2013</option>
                <option value="2012">2012</option>
            </select></h3>
            <p> &nbsp;</p>
            <div id="report">
                <canvas id="bar" height="400" width="700" style="width: 700px; height: 400px;margin-left: 30px"></canvas>
            </div>
        </div>
        <br><br><br><br><br>
        <div class="graph_box">

            <div class="clearfix">

            </div>
            <div class="copy_layout">
                <p>Copyright &copy; 2015.TianPu Hotel All rights reserved.</p>
            </div>
        </div>

        <script type="text/javascript">
            var report;
            var xmlhttp;
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
                if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                        report =  JSON.parse(xmlhttp.responseText);

                    var barChartData = {
                        labels : ["January","February","March","April","May","June","July","August","September","October","November","December"],
                        datasets : [
                            {
                                fillColor : "cyan",
                                strokeColor : "#ef553a",
                                data : report
                            }
                        ]

                    };
                    new Chart(document.getElementById("bar").getContext("2d")).Bar(barChartData);

                }
            }
            xmlhttp.open("GET","http://127.0.0.1:8080/api/hotelOrders/report/2015",true);
            xmlhttp.send();

            var change = function(value){
                console.log(value);
                xmlhttp.onreadystatechange=function()
                {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                    {
                        if(xmlhttp.responseText.length == 0){
                            report = [0,0,0,0,0,0,0,0,0,0,0,0];
                        }
                        else {
                            report = JSON.parse(xmlhttp.responseText);
                        }
                        var barChartData = {
                            labels : ["January","February","March","April","May","June","July","August","September","October","November","December"],
                            datasets : [
                                {
                                    fillColor : "cyan",
                                    strokeColor : "#ef553a",
                                    data : report
                                }
                            ]

                        };
                        var re = document.getElementById("bar");
                        var rr = re;
                        document.getElementById("report").removeChild(re);
                        document.getElementById("report").appendChild(rr);
                        var chart = new Chart(rr.getContext("2d"));
                        chart.Bar(barChartData);
                    }
                }
                xmlhttp.open("GET","http://127.0.0.1:8080/api/hotelOrders/report/"+value,true);
                xmlhttp.send();
            }

        </script>
        <div class="copy_layout">
        </div>
    </div>
</div>
<!-- /#page-wrapper -->
</div>
